---
import { Image } from "astro:assets";
import Heading from "./ui/Heading.astro";
import chessIcon from "../assets/chess.svg";
import paletteIcon from "../assets/palette.svg";
import wrenchIcon from "../assets/wrench.svg";
import rocketIcon from "../assets/rocket.svg";
---

<section class="section background-broken-white">
	<div class="container">
		<Heading>
			<h2 class="section-title">Ons proces</h2>
			<p class="subtitle">Hoe wij websites bouwen die converteren</p>
		</Heading>
		<div class="steps equal-columns">
			<div class="step box-shadow" data-step>
				<div class="process-icon">
					<Image src={chessIcon} alt="Chess Icon" width={48} height={48} />
				</div>
				<h2>Strategie</h2>
				<p>We beginnen met het begrijpen van uw behoeften en doelen</p>
			</div>
			<div class="step box-shadow" data-step>
				<div class="process-icon">
					<Image src={paletteIcon} alt="Palette Icon" width={48} height={48} />
				</div>
				<h2>Design</h2>
				<p>We creëren een visueel aantrekkelijk en gebruiksvriendelijk ontwerp</p>
			</div>
			<div class="step box-shadow" data-step>
				<div class="process-icon">
					<Image src={wrenchIcon} alt="Wrench Icon" width={48} height={48} />
				</div>
				<h2>Ontwikkeling</h2>
				<p>We bouwen uw website met de nieuwste technologieën</p>
			</div>
			<div class="step box-shadow" data-step>
				<div class="process-icon">
					<Image src={rocketIcon} alt="Rocket Icon" width={48} height={48} />
				</div>
				<h2>Lancering</h2>
				<p>We lanceren uw website en zorgen voor een soepele overgang</p>
			</div>
		</div>
	</div>
</section>

<style>
	.step {
		display: grid;
		gap: var(--grid-flow-gap, 1.5rem);
		padding-inline: 1.5rem;
		padding-block: 3rem;
		border-radius: var(--border-radius);
		background-color: var(--background-main);
		opacity: 0;
		transform: translateY(50px) scale(0.95);
		transition:
			opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
			transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
			box-shadow 0.3s ease;
	}

	.step.animate {
		opacity: 1;
		transform: translateY(0) scale(1);
	}

	.step:hover {
		transform: translateY(-8px) scale(1);
		box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
	}

	.step.animate:hover {
		transform: translateY(-8px) scale(1.02);
	}

	.process-icon {
		width: 64px;
		height: 64px;
		border-radius: 12px;
		background: linear-gradient(135deg, rgba(255, 87, 51, 0.1) 0%, rgba(255, 87, 51, 0.05) 100%);
		display: flex;
		align-items: center;
		justify-content: center;
		transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
	}

	.step:hover .process-icon {
		transform: scale(1.1) rotate(5deg);
		background: linear-gradient(135deg, rgba(255, 87, 51, 0.15) 0%, rgba(255, 87, 51, 0.08) 100%);
	}

	.process-icon img {
		transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
	}

	.step:hover .process-icon img {
		transform: scale(1.1);
	}

	.steps {
		--step-delay: 0.12s;
	}

	.step:nth-child(1) {
		transition-delay: calc(var(--step-delay) * 1);
	}
	.step:nth-child(2) {
		transition-delay: calc(var(--step-delay) * 2);
	}
	.step:nth-child(3) {
		transition-delay: calc(var(--step-delay) * 3);
	}
	.step:nth-child(4) {
		transition-delay: calc(var(--step-delay) * 4);
	}
</style>

<script>
	const observer = new IntersectionObserver(
		(entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting) {
					entry.target.classList.add("animate");
					// Stop observing once animated for smoother experience
					observer.unobserve(entry.target);
				}
			});
		},
		{
			threshold: 0.15,
			rootMargin: "-30px 0px -30px 0px",
		},
	);

	document.addEventListener("DOMContentLoaded", () => {
		document.querySelectorAll("[data-step]").forEach((step) => {
			observer.observe(step);
		});
	});
</script>
