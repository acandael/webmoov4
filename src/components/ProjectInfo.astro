---
const { project } = Astro.props;
const { Content } = await project.render();
---

<section class="section project-info-section">
	<div class="container">
		<div class="project-info-grid">
			<div class="project-description" data-animate>
				<h2 class="section-title">Over het project</h2>
				<div class="description-content">
					<Content />
				</div>
				<div class="tech-stack-wrapper">
					<h3 class="tech-heading">
						<svg
							width="20"
							height="20"
							viewBox="0 0 24 24"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"
								stroke="currentColor"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"></path>
						</svg>
						Technologie
					</h3>
					<ul class="tech-list">
						{
							project.data.tech.map((tech: string) => (
								<li class="tech-item">
									<span class="tech-dot" />
									{tech}
								</li>
							))
						}
					</ul>
				</div>
			</div>

			<div class="project-meta" data-animate>
				<div class="meta-card">
					<div class="meta-item">
						<div class="meta-icon">
							<svg
								width="20"
								height="20"
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
								<path
									d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
							</svg>
						</div>
						<div class="meta-content">
							<h3>Client</h3>
							<p>{project.data.client}</p>
						</div>
					</div>

					<div class="meta-item">
						<div class="meta-icon">
							<svg
								width="20"
								height="20"
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M10 13C10.4295 13.5741 10.9774 14.0491 11.6066 14.3929C12.2357 14.7367 12.9315 14.9411 13.6467 14.9923C14.3618 15.0435 15.0796 14.9403 15.7513 14.6897C16.4231 14.4392 17.0331 14.047 17.54 13.54L20.54 10.54C21.4508 9.59695 21.9548 8.33394 21.9434 7.02296C21.932 5.71198 21.4061 4.45791 20.4791 3.53087C19.5521 2.60383 18.298 2.07799 16.987 2.0666C15.676 2.0552 14.413 2.55918 13.47 3.46997L11.75 5.17997"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
								<path
									d="M14 11C13.5705 10.4259 13.0226 9.95083 12.3934 9.60704C11.7642 9.26324 11.0684 9.05885 10.3533 9.00763C9.63816 8.95641 8.92037 9.05963 8.24861 9.31018C7.57685 9.56073 6.96684 9.9529 6.46 10.46L3.46 13.46C2.54921 14.403 2.04524 15.666 2.05663 16.977C2.06802 18.288 2.59387 19.5421 3.52091 20.4691C4.44795 21.3961 5.70201 21.922 7.01299 21.9334C8.32397 21.9448 9.58698 21.4408 10.53 20.53L12.24 18.82"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
							</svg>
						</div>
						<div class="meta-content">
							<h3>Website</h3>
							<a href={project.data.website} target="_blank" rel="noopener noreferrer">
								{project.data.website.replace(/^https?:\/\/(www\.)?/, "")}
							</a>
						</div>
					</div>

					<div class="meta-item">
						<div class="meta-icon">
							<svg
								width="20"
								height="20"
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<rect
									x="3"
									y="4"
									width="18"
									height="18"
									rx="2"
									ry="2"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></rect>
								<line
									x1="16"
									y1="2"
									x2="16"
									y2="6"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></line>
								<line
									x1="8"
									y1="2"
									x2="8"
									y2="6"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></line>
								<line
									x1="3"
									y1="10"
									x2="21"
									y2="10"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></line>
							</svg>
						</div>
						<div class="meta-content">
							<h3>Tijdlijn</h3>
							<p>{project.data.timeline}</p>
						</div>
					</div>

					<div class="meta-item services-item">
						<div class="meta-icon">
							<svg
								width="20"
								height="20"
								viewBox="0 0 24 24"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M12 2L2 7L12 12L22 7L12 2Z"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
								<path
									d="M2 17L12 22L22 17"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
								<path
									d="M2 12L12 17L22 12"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"></path>
							</svg>
						</div>
						<div class="meta-content">
							<h3>Services</h3>
							<div class="services">
								{
									project.data.services.map((service: string) => (
										<span class="service-tag">{service}</span>
									))
								}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<style>
	.project-info-section {
		background: var(--background-light-gray);
		padding-block: 5rem;
		position: relative;
	}

	.container {
		max-width: var(--container-max-width);
		margin-inline: auto;
	}

	.project-info-grid {
		display: grid;
		gap: 3rem;
		align-items: start;

		@media (width > 760px) {
			grid-template-columns: 1.5fr 1fr;
			gap: 4rem;
		}
	}

	/* Project Description */
	.project-description {
		display: flex;
		flex-direction: column;
		gap: 2.5rem;
		opacity: 0;
		transform: translateX(-30px);
		transition:
			opacity 0.6s ease,
			transform 0.6s ease;
	}

	.project-description.animate {
		opacity: 1;
		transform: translateX(0);
	}

	.description-content {
		font-size: var(--font-size-md);
		line-height: 1.7;
		color: var(--clr-gray-700);
	}

	.description-content p {
		margin: 0;
	}

	/* Tech Stack */
	.tech-stack-wrapper {
		background: white;
		border-radius: 16px;
		padding: 2rem;
		box-shadow:
			0 2px 12px rgba(0, 0, 0, 0.04),
			0 1px 4px rgba(0, 0, 0, 0.02);
		border: 1px solid rgba(0, 0, 0, 0.04);
	}

	.tech-heading {
		font-family: var(--ff-accent);
		font-size: var(--font-size-regular);
		font-weight: 600;
		color: var(--clr-black);
		margin: 0 0 1.5rem 0;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	.tech-heading svg {
		color: #ff5733;
	}

	.tech-list {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
		gap: 1rem;
	}

	.tech-item {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		font-family: var(--ff-accent);
		font-size: var(--font-size-sm);
		color: var(--clr-gray-600);
		padding: 0.5rem 0;
	}

	.tech-dot {
		width: 8px;
		height: 8px;
		background: linear-gradient(135deg, #ff5733 0%, #e64d2a 100%);
		border-radius: 50%;
		flex-shrink: 0;
	}

	/* Project Meta */
	.project-meta {
		opacity: 0;
		transform: translateX(30px);
		transition:
			opacity 0.6s ease,
			transform 0.6s ease;
		transition-delay: 0.2s;
	}

	.project-meta.animate {
		opacity: 1;
		transform: translateX(0);
	}

	.meta-card {
		background: white;
		border-radius: 20px;
		padding: 2.5rem 2rem;
		box-shadow:
			0 4px 24px rgba(0, 0, 0, 0.06),
			0 2px 8px rgba(0, 0, 0, 0.04);
		border: 1px solid rgba(0, 0, 0, 0.04);
		display: flex;
		flex-direction: column;
		gap: 2rem;
		position: sticky;
		top: 100px;
	}

	@media (max-width: 760px) {
		.meta-card {
			position: static;
		}
	}

	/* Meta Items */
	.meta-item {
		display: flex;
		gap: 1rem;
		padding-bottom: 2rem;
		border-bottom: 1px solid rgba(0, 0, 0, 0.06);
	}

	.meta-item:last-child {
		padding-bottom: 0;
		border-bottom: none;
	}

	.meta-icon {
		width: 44px;
		height: 44px;
		border-radius: 12px;
		background: rgba(255, 87, 51, 0.08);
		border: 2px solid rgba(255, 87, 51, 0.15);
		display: flex;
		align-items: center;
		justify-content: center;
		flex-shrink: 0;
		color: #ff5733;
		transition:
			background-color 0.3s ease,
			border-color 0.3s ease,
			transform 0.3s ease;
	}

	.meta-item:hover .meta-icon {
		background-color: rgba(255, 87, 51, 0.12);
		border-color: rgba(255, 87, 51, 0.25);
		transform: scale(1.05);
	}

	.meta-content {
		flex: 1;
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}

	.meta-content h3 {
		font-family: var(--ff-accent);
		font-size: var(--font-size-sm);
		font-weight: 600;
		color: var(--clr-gray-600);
		margin: 0;
		text-transform: uppercase;
		letter-spacing: 0.5px;
	}

	.meta-content p {
		font-size: var(--font-size-regular);
		color: var(--clr-black);
		margin: 0;
		font-weight: 500;
	}

	.meta-content a {
		color: #ff5733;
		text-decoration: none;
		font-weight: 500;
		font-size: var(--font-size-regular);
		transition: color 0.3s ease;
		display: inline-flex;
		align-items: center;
		gap: 0.25rem;
	}

	.meta-content a:hover {
		color: #e64d2a;
		text-decoration: underline;
	}

	/* Services */
	.services-item {
		flex-direction: column;
		gap: 1rem;
		align-items: flex-start;
	}

	.services-item .meta-content {
		width: 100%;
	}

	.services {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		margin-top: 0.5rem;
	}

	.service-tag {
		font-family: var(--ff-accent);
		font-size: var(--font-size-sm);
		padding: 0.5rem 1rem;
		background: var(--background-light-gray);
		color: var(--clr-gray-600);
		border-radius: 8px;
		border: 1px solid rgba(0, 0, 0, 0.06);
		transition:
			background-color 0.3s ease,
			border-color 0.3s ease,
			transform 0.3s ease;
		display: inline-block;
	}

	.service-tag:hover {
		background-color: rgba(255, 87, 51, 0.08);
		border-color: rgba(255, 87, 51, 0.2);
		transform: translateY(-2px);
	}

	@media (max-width: 760px) {
		.project-info-section {
			padding-block: 3rem;
		}

		.meta-card {
			padding: 2rem 1.5rem;
		}

		.tech-list {
			grid-template-columns: 1fr;
		}
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						entry.target.classList.add("animate");
					}
				});
			},
			{
				threshold: 0.1,
				rootMargin: "0px 0px -100px 0px",
			},
		);

		document.querySelectorAll("[data-animate]").forEach((element) => {
			observer.observe(element);
		});
	});
</script>
